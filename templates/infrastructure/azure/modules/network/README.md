<!-- BEGIN_TF_DOCS -->
<!-- Code generated by terraform-docs. DO NOT EDIT. -->
# Azure Network Module

This module creates a comprehensive Azure Virtual Network (VNet) infrastructure with subnets, network security groups (NSGs),
and route tables. The module provides a standardized approach to network segmentation and security for Azure workloads.

The module leverages Azure Verified Modules (AVM) to ensure best practices and provides configurable subnet definitions,
NSG rules, and network routing capabilities for enterprise-grade network architecture.

## Features

This module provides network infrastructure functionality with the following capabilities:

- Creates Virtual Network with standardized naming conventions
- Configurable address space and subnet definitions
- Network Security Groups (NSGs) with customizable rules
- Route tables for custom routing scenarios
- VM protection enabled by default
- Support for multiple subnets with different configurations
- Integration with Azure services delegation

## Usage

To use this module in your Terraform configuration, you'll need to provide values for the required variables.

### Example - Basic Virtual Network with Subnets

This example shows the most basic usage of the module for creating a virtual network with multiple subnets.
```terraform
module "network" {
  source = "./modules/network"

  # Basic naming and location variables
  instance          = 1
  location          = "West Europe"
  stage             = "dev"
  product           = "dbk"
  short_description = "main"
  # Resource group
  resource_group_name = "rg-dbk-dev-westeurope-01"

  # Network configuration
  address_space = "10.0.0.0/16"

  # Subnets configuration
  subnets = {
    web = {
      cidr_range_size = 24
      idx             = 1
      nsg_rules = [
        {
          name                    = "AllowHTTP"
          protocol                = "Tcp"
          source                  = "Internet"
          destination_port_ranges = ["80"]
        },
        {
          name                    = "AllowHTTPS"
          protocol                = "Tcp"
          source                  = "Internet"
          destination_port_ranges = ["443"]
        }
      ]
      delegations = [
        {
          name    = "webapp-delegation"
          service = "Microsoft.Web/serverFarms"
        }
      ]
    }
    
    app = {
      cidr_range_size = 24
      idx             = 2
      nsg_rules = [
        {
          name                    = "AllowFromWeb"
          protocol                = "Tcp"
          source                  = "10.0.1.0/24"
          destination_port_ranges = ["8080", "8443"]
        }
      ]
      delegations = []
    }
    
    data = {
      cidr_range_size = 24
      idx             = 3
      nsg_rules = [
        {
          name                    = "AllowFromApp"
          protocol                = "Tcp"
          source                  = "10.0.2.0/24"
          destination_port_ranges = ["1433", "5432"]
        }
      ]
      delegations = []
    }
  }

  # Tags
  tags = {
    environment = "dbk-dev-westeurope"
    project     = "digital-transformation"
  }
}
```

<!-- markdownlint-disable MD033 -->
## Requirements

The following requirements are needed by this module:

- <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) (>= 1.4.0)

- <a name="requirement_azapi"></a> [azapi](#requirement\_azapi) (>=2.0, <3.0)

- <a name="requirement_azurecaf"></a> [azurecaf](#requirement\_azurecaf) (>= 1.2.28)

- <a name="requirement_azurerm"></a> [azurerm](#requirement\_azurerm) (~>4.0)

- <a name="requirement_random"></a> [random](#requirement\_random) (>= 3.3.2)

## Resources

The following resources are used by this module:

- [azurerm_network_security_group.subnets](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/network_security_group) (resource)

<!-- markdownlint-disable MD013 -->
## Required Inputs

The following input variables are required:

### <a name="input_address_space"></a> [address\_space](#input\_address\_space)

Description: Address space in CIDR format

Type: `string`

### <a name="input_instance"></a> [instance](#input\_instance)

Description: Environment instance for region

Type: `number`

### <a name="input_location"></a> [location](#input\_location)

Description: Azure region

Type: `string`

### <a name="input_product"></a> [product](#input\_product)

Description: The product name this resource belongs to

Type: `string`

### <a name="input_resource_group_name"></a> [resource\_group\_name](#input\_resource\_group\_name)

Description: Resource group name

Type: `string`

### <a name="input_stage"></a> [stage](#input\_stage)

Description: Stage the resource is provisioned

Type: `string`

### <a name="input_subnets"></a> [subnets](#input\_subnets)

Description: Map of subnets to create and their settings.

Map key is an arbitrary identifier. Each subnet object supports:

- `cidr_range_size` - The size (mask bits) used to derive the subnet CIDR from the VNet address space.
- `idx` - Index used to generate the subnet address prefix within the VNet address space.
- `nsg_rules` - Optional list of NSG rules to attach to this subnet. Each rule supports:
  - `name` - Rule name.
  - `protocol` - Network protocol (e.g., Tcp, Udp, or "*").
  - `source` - Source address prefix or tag (e.g., AzureLoadBalancer, Internet, 10.0.0.0/24).
  - `destination_port_ranges` - List of destination port ranges (e.g., ["80", "443"]).
- `delegations` - Optional list of service delegations for this subnet. Each delegation supports:
  - `name` - Delegation name.
  - `service` - Service to delegate to (e.g., Microsoft.Web/serverFarms).

Type:

```hcl
map(object({
    cidr_range_size = number
    idx             = number
    nsg_rules = optional(list(object({
      name                    = string
      protocol                = string
      source                  = string
      destination_port_ranges = list(string)
    })), [])
    delegations = optional(list(object({
      name    = string
      service = string
    })), [])
  }))
```

## Optional Inputs

The following input variables are optional (have default values):

### <a name="input_short_description"></a> [short\_description](#input\_short\_description)

Description: Optional short description of the resource

Type: `string`

Default: `null`

### <a name="input_tags"></a> [tags](#input\_tags)

Description: A mapping of tags to assign to the resource

Type: `map(string)`

Default: `{}`

## Outputs

The following outputs are exported:

### <a name="output_subnets"></a> [subnets](#output\_subnets)

Description: Information about the subnets created

### <a name="output_vnet_id"></a> [vnet\_id](#output\_vnet\_id)

Description: The ID of the Virtual Network

### <a name="output_vnet_name"></a> [vnet\_name](#output\_vnet\_name)

Description: The name of the Virtual Network

## Modules

The following Modules are called:

### <a name="module_cidr_calculator"></a> [cidr\_calculator](#module\_cidr\_calculator)

Source: Azure/avm-utl-network-ip-addresses/azurerm

Version: 0.1.0

### <a name="module_nsg_naming"></a> [nsg\_naming](#module\_nsg\_naming)

Source: ../naming

Version:

### <a name="module_subnet_naming"></a> [subnet\_naming](#module\_subnet\_naming)

Source: ../naming

Version:

### <a name="module_subnets"></a> [subnets](#module\_subnets)

Source: Azure/avm-res-network-virtualnetwork/azurerm//modules/subnet

Version: 0.10.0

### <a name="module_vnet"></a> [vnet](#module\_vnet)

Source: Azure/avm-res-network-virtualnetwork/azurerm

Version: 0.10.0

### <a name="module_vnet_naming"></a> [vnet\_naming](#module\_vnet\_naming)

Source: ../naming

Version:

<!-- END_TF_DOCS -->