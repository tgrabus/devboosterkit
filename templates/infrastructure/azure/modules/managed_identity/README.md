<!-- BEGIN_TF_DOCS -->
<!-- Code generated by terraform-docs. DO NOT EDIT. -->
# Azure Managed Identity Module

This module creates user-assigned managed identities in Azure with optional role assignments.
Managed identities provide an identity for applications to use when connecting to resources that support Azure Active Directory authentication.

The module simplifies the creation and configuration of user-assigned managed identities while providing flexible role assignment capabilities for secure access to Azure resources.

## Features

This module provides managed identity functionality with the following capabilities:

- Creates user-assigned managed identities with consistent naming
- Integrates with Azure naming conventions for consistent resource naming
- Provides essential identity outputs (resource ID, principal ID, client ID)
- Supports flexible role-based access control (RBAC) configuration

## Usage

To use this module in your Terraform configuration, you'll need to provide values for the required variables.

### Example - Basic Managed Identity

This example shows the most basic usage of the module for creating a user-assigned managed identity.
```terraform
module "managed_identity" {
  source = "./modules/managed_identity"

  # Basic naming and location variables
  stage               = "dev"
  location            = "West Europe"
  instance            = 1
  product             = "dbk"
  short_description   = "api-backend"

  # Resource group
  resource_group_name = "rg-dbk-dev-westeurope-1"

  # Optional role assignments
  roles = {
    storage_access = {
      role_name = "Storage Blob Data Contributor"
      scope     = "/subscriptions/12345678-1234-1234-1234-123456789012/resourceGroups/rg-storage-dev/providers/Microsoft.Storage/storageAccounts/stfinzeodev001"
    }
    keyvault_access = {
      role_name = "Key Vault Secrets User"
      scope     = "/subscriptions/12345678-1234-1234-1234-123456789012/resourceGroups/rg-keyvault-dev/providers/Microsoft.KeyVault/vaults/kv-finzeo-dev-001"
    }
  }

  # Tags
  tags = {
    environment = "dbk-dev-westeurope"
    project     = "digital-transformation"
  }
}

```

<!-- markdownlint-disable MD033 -->
## Requirements

No requirements.

## Resources

The following resources are used by this module:

- [azurerm_role_assignment.this](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/role_assignment) (resource)
- [azurerm_user_assigned_identity.this](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/user_assigned_identity) (resource)

<!-- markdownlint-disable MD013 -->
## Required Inputs

The following input variables are required:

### <a name="input_instance"></a> [instance](#input\_instance)

Description: Environment instance for region

Type: `number`

### <a name="input_location"></a> [location](#input\_location)

Description: Azure region

Type: `string`

### <a name="input_product"></a> [product](#input\_product)

Description: The product name this resource belongs to

Type: `string`

### <a name="input_resource_group_name"></a> [resource\_group\_name](#input\_resource\_group\_name)

Description: Resource group name

Type: `string`

### <a name="input_stage"></a> [stage](#input\_stage)

Description: Stage the resource is provisioned

Type: `string`

## Optional Inputs

The following input variables are optional (have default values):

### <a name="input_roles"></a> [roles](#input\_roles)

Description: Map of role assignments to create for this Managed Identity.

Map key is an arbitrary identifier. Each object supports:

- `scope` - The Azure Resource ID of the scope where the role assignment applies (e.g., a subscription, resource group, or resource).
- `role_name` - The name of the built-in or custom role to assign (e.g., "Reader").

Type:

```hcl
map(object({
    scope     = string
    role_name = string
  }))
```

Default: `{}`

### <a name="input_short_description"></a> [short\_description](#input\_short\_description)

Description: Optional short description of the resource

Type: `string`

Default: `null`

## Outputs

The following outputs are exported:

### <a name="output_client_id"></a> [client\_id](#output\_client\_id)

Description: Client (Application) Id

### <a name="output_principal_id"></a> [principal\_id](#output\_principal\_id)

Description: Principal id

### <a name="output_resource_id"></a> [resource\_id](#output\_resource\_id)

Description: Resource id

## Modules

The following Modules are called:

### <a name="module_naming"></a> [naming](#module\_naming)

Source: ../naming

Version:

<!-- END_TF_DOCS -->