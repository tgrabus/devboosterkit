<!-- BEGIN_TF_DOCS -->
<!-- Code generated by terraform-docs. DO NOT EDIT. -->
# Azure Container Registry Module

This module creates an Azure Container Registry (ACR) with standardized naming conventions and security best practices.
The module supports multiple SKU tiers (Basic, Standard, Premium) and provides configurable network access controls,
private endpoints, and role-based access control (RBAC) for secure container image management.

The module leverages Azure Verified Modules (AVM) to ensure best practices and provides enterprise-grade features.

## Features

This module provides container registry functionality with the following capabilities:

- Creates Azure Container Registry with standardized naming conventions
- Support for Basic, Standard, and Premium SKU tiers
- Configurable public/private network access
- Private endpoint support for Premium SKU
- Network firewall rules with IP allowlisting
- Zone redundancy for Premium SKU
- Role-based access control (RBAC) assignments
- Integration with managed identities and service principals

## Usage

To use this module in your Terraform configuration, you'll need to provide values for the required variables.

### Example - Basic Container Registry

This example shows the most basic usage of the module for creating a container registry.
```terraform
module "acr" {
  source = "./modules/acr"

  # Basic naming and location variables
  instance          = 1
  location          = "West Europe"
  stage             = "dev"
  product           = "dbk"
  short_description = "main"
  # Resource group
  resource_group_name = "rg-dbk-dev-westeurope-01"

  # Container Registry configuration
  sku                           = "Premium"
  public_network_access_enabled = false

  # Network firewall rules
  allowed_ip_ranges = {
    "office"     = "203.0.113.0/24"
    "build-agent" = "198.51.100.1/32"
  }

  # Role assignments
  roles = {
    "devops-team" = {
      role_definition_id_or_name = "AcrPush"
      principal_id               = "12345678-1234-1234-1234-123456789012"
    }
    "app-identity" = {
      role_definition_id_or_name = "AcrPull"
      principal_id               = "87654321-4321-4321-4321-210987654321"
    }
  }

  # Private endpoints for Premium SKU
  private_endpoints = {
    "main" = {
      private_dns_zone_resource_id = "/subscriptions/sub-id/resourceGroups/rg-dns/providers/Microsoft.Network/privateDnsZones/privatelink.azurecr.io"
      subnet_resource_id           = "/subscriptions/sub-id/resourceGroups/rg-network/providers/Microsoft.Network/virtualNetworks/vnet-main/subnets/snet-pe"
      resource_group_name          = "rg-dbk-dev-westeurope-01"
    }
  }

  # Tags
  tags = {
    environment = "dbk-dev-westeurope"
    project     = "digital-transformation"
  }
}
```

<!-- markdownlint-disable MD033 -->
## Requirements

No requirements.

## Resources

No resources.

<!-- markdownlint-disable MD013 -->
## Required Inputs

The following input variables are required:

### <a name="input_instance"></a> [instance](#input\_instance)

Description: Environment instance for region

Type: `number`

### <a name="input_location"></a> [location](#input\_location)

Description: Azure region

Type: `string`

### <a name="input_product"></a> [product](#input\_product)

Description: The product name this resource belongs to

Type: `string`

### <a name="input_resource_group_name"></a> [resource\_group\_name](#input\_resource\_group\_name)

Description: Resource group name

Type: `string`

### <a name="input_stage"></a> [stage](#input\_stage)

Description: Stage the resource is provisioned

Type: `string`

## Optional Inputs

The following input variables are optional (have default values):

### <a name="input_allowed_ip_ranges"></a> [allowed\_ip\_ranges](#input\_allowed\_ip\_ranges)

Description: Map of allowed IPs when firewall is enabled

Type: `map(string)`

Default: `{}`

### <a name="input_private_endpoints"></a> [private\_endpoints](#input\_private\_endpoints)

Description: A map of Private Endpoints to create for the Container Registry.

Map key is an arbitrary identifier. Each object supports:

- `private_dns_zone_resource_id` - Resource ID of the Private DNS Zone to link (e.g. /subscriptions/<subId>/resourceGroups/<rg>/providers/Microsoft.Network/privateDnsZones/privatelink.azurecr.io).
- `subnet_resource_id` - Resource ID of the subnet where the Private Endpoint will be created.
- `resource_group_name` - Optional. Target resource group name for the Private Endpoint resource. If omitted, module defaults are used.

Type:

```hcl
map(object({
    private_dns_zone_resource_id = string
    subnet_resource_id           = string
    resource_group_name          = optional(string)
  }))
```

Default: `{}`

### <a name="input_public_network_access_enabled"></a> [public\_network\_access\_enabled](#input\_public\_network\_access\_enabled)

Description: Whether public network access is enabled

Type: `bool`

Default: `true`

### <a name="input_roles"></a> [roles](#input\_roles)

Description: Map of role assignments to create for the Container Registry.

Map key is an arbitrary identifier. Each object supports:

- `role_definition_id_or_name` - The role to assign. Can be a built-in role name (e.g., "AcrPull") or a role definition ID (GUID).
- `principal_id` - Object ID of the principal (user, group, or managed identity) that will receive the role assignment.

Type:

```hcl
map(object({
    role_definition_id_or_name = string
    principal_id               = string
  }))
```

Default: `{}`

### <a name="input_short_description"></a> [short\_description](#input\_short\_description)

Description: Optional short description of the resource

Type: `string`

Default: `null`

### <a name="input_sku"></a> [sku](#input\_sku)

Description: SKU tier for the container registry

Type: `string`

Default: `"Basic"`

### <a name="input_tags"></a> [tags](#input\_tags)

Description: A mapping of tags to assign to the resource

Type: `map(string)`

Default: `{}`

## Outputs

The following outputs are exported:

### <a name="output_registry_url"></a> [registry\_url](#output\_registry\_url)

Description: Login server URL of the container registry

### <a name="output_resource_id"></a> [resource\_id](#output\_resource\_id)

Description: Resource id

## Modules

The following Modules are called:

### <a name="module_naming"></a> [naming](#module\_naming)

Source: ../naming

Version:

### <a name="module_naming_nic"></a> [naming\_nic](#module\_naming\_nic)

Source: ../naming

Version:

### <a name="module_naming_pe"></a> [naming\_pe](#module\_naming\_pe)

Source: ../naming

Version:

### <a name="module_naming_psc"></a> [naming\_psc](#module\_naming\_psc)

Source: ../naming

Version:

### <a name="module_this"></a> [this](#module\_this)

Source: Azure/avm-res-containerregistry-registry/azurerm

Version: 0.4.0

<!-- END_TF_DOCS -->