<!-- BEGIN_TF_DOCS -->
<!-- Code generated by terraform-docs. DO NOT EDIT. -->
# Azure Web App Module

This module creates an Azure Web App (App Service) with comprehensive configuration options for hosting web applications,
APIs, and containerized applications. The module provides standardized deployment patterns with built-in security,
monitoring, and identity management.

The module leverages Azure Verified Modules (AVM) to ensure best practices and provides configurable
application stacks, private endpoints, managed identities, and Application Insights integration.

## Features

This module provides Web App functionality with the following capabilities:

- Creates Azure Web App with standardized naming conventions
- Support for multiple application stacks (.NET, Docker, etc.)
- Managed identity integration (system and user-assigned)
- Virtual network integration and private endpoints
- IP restriction rules for enhanced security
- Application Insights integration with configurable retention
- Container registry integration with managed identity
- Always-on and auto-scaling capabilities
- Built-in monitoring and alerting
- Comprehensive tagging support

## Usage

To use this module in your Terraform configuration, you'll need to provide values for the required variables.

### Example - Basic Web App with Application Insights

This example shows the most basic usage of the module for creating a web app with monitoring.
```terraform
module "web_app" {
  source = "./modules/web_app"

  # Basic naming and location variables
  instance          = 1
  location          = "West Europe"
  stage             = "dev"
  product           = "dbk"
  short_description = "api"

  # Resource group
  resource_group_name = "rg-dbk-dev-westeurope-01"

  # Operating system and service plan configuration
  os_type                   = "Linux"
  service_plan_resource_id  = "/subscriptions/12345678-1234-1234-1234-123456789012/resourceGroups/rg-dbk-dev-westeurope-001/providers/Microsoft.Web/serverfarms/asp-dbk-dev-westeurope-001"
  
  # Virtual network integration
  virtual_network_subnet_id = "/subscriptions/12345678-1234-1234-1234-123456789012/resourceGroups/rg-network-dev/providers/Microsoft.Network/virtualNetworks/vnet-dbk-dev/subnets/snet-webapp"
  
  # Application settings
  app_settings = {
    "ASPNETCORE_ENVIRONMENT" = "Development"
  }
  
  # Application stack configuration (.NET 9)
  app_stack = {
    dotnet_version      = "v9.0"
    docker_registry_url = null
    docker_image_name   = null
  }
  
  # Security and access settings
  public_network_access_enabled = false
  always_on                    = true
  https_only                   = true
  http2_enabled               = true
  vnet_route_all_enabled      = true
  websockets_enabled          = false
  client_affinity_enabled     = false
  
  # Private endpoints configuration
  private_endpoints = {
    "webapp-pe-001" = {
      private_dns_zone_resource_id = "/subscriptions/12345678-1234-1234-1234-123456789012/resourceGroups/rg-dns/providers/Microsoft.Network/privateDnsZones/privatelink.azurewebsites.net"
      subnet_resource_id           = "/subscriptions/12345678-1234-1234-1234-123456789012/resourceGroups/rg-network-dev/providers/Microsoft.Network/virtualNetworks/vnet-dbk-dev/subnets/snet-private-endpoints"
      resource_group_name          = "rg-dbk-dev-westeurope-001"
    }
  }
  
  # Allowed IP addresses (for administrators and CI/CD systems)
  allowed_ips = {
    "office-network"     = "203.0.113.0/24"
    "azure-devops-pool"  = "20.190.128.0/18"
  }
  
  # Application Insights for monitoring
  application_insights = {
    la_workspace_id     = "/subscriptions/12345678-1234-1234-1234-123456789012/resourceGroups/rg-monitoring/providers/Microsoft.OperationalInsights/workspaces/law-dbk-dev"
    retention_in_days   = 90
    resource_group_name = "rg-dbk-dev-westeurope-001"
  }
  
  # Action group for alerts
  action_group_id = "/subscriptions/12345678-1234-1234-1234-123456789012/resourceGroups/rg-monitoring/providers/Microsoft.Insights/actionGroups/ag-dbk-webapp-alerts"
  
  # Resource tags
  tags = {
    environment = "dbk-dev-westeurope"
    project     = "digital-transformation"
  }
}

```

<!-- markdownlint-disable MD033 -->
## Requirements

No requirements.

## Resources

The following resources are used by this module:

- [azurerm_monitor_metric_alert.alerts](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/monitor_metric_alert) (resource)

<!-- markdownlint-disable MD013 -->
## Required Inputs

The following input variables are required:

### <a name="input_action_group_id"></a> [action\_group\_id](#input\_action\_group\_id)

Description: Action Group to use when alerts are raised

Type: `string`

### <a name="input_app_stack"></a> [app\_stack](#input\_app\_stack)

Description: Application runtime stack configuration.

Each object supports:

- `dotnet_version` - Optional. .NET runtime version (e.g., "v8.0").
- `docker_registry_url` - Optional. Docker registry server URL for containerized apps.
- `docker_image_name` - Optional. Docker image name (optionally including tag), used when deploying a container.

Type:

```hcl
object({
    dotnet_version      = optional(string)
    docker_registry_url = optional(string)
    docker_image_name   = optional(string)
  })
```

### <a name="input_instance"></a> [instance](#input\_instance)

Description: Environment instance for region

Type: `number`

### <a name="input_location"></a> [location](#input\_location)

Description: Azure region

Type: `string`

### <a name="input_os_type"></a> [os\_type](#input\_os\_type)

Description: The operating system for the Web App (Windows or Linux)

Type: `string`

### <a name="input_product"></a> [product](#input\_product)

Description: The product name this resource belongs to

Type: `string`

### <a name="input_resource_group_name"></a> [resource\_group\_name](#input\_resource\_group\_name)

Description: Resource group name

Type: `string`

### <a name="input_service_plan_resource_id"></a> [service\_plan\_resource\_id](#input\_service\_plan\_resource\_id)

Description: Resource ID of the App Service Plan to host this Web App

Type: `string`

### <a name="input_stage"></a> [stage](#input\_stage)

Description: Stage the resource is provisioned

Type: `string`

### <a name="input_virtual_network_subnet_id"></a> [virtual\_network\_subnet\_id](#input\_virtual\_network\_subnet\_id)

Description: Subnet resource ID for VNet integration

Type: `string`

## Optional Inputs

The following input variables are optional (have default values):

### <a name="input_allowed_ips"></a> [allowed\_ips](#input\_allowed\_ips)

Description: Map of allowed IPs when firewall is enabled

Type: `map(string)`

Default: `{}`

### <a name="input_always_on"></a> [always\_on](#input\_always\_on)

Description: n/a

Type: `bool`

Default: `false`

### <a name="input_app_settings"></a> [app\_settings](#input\_app\_settings)

Description: Key-value application settings to apply to the Web App

Type: `map(string)`

Default: `{}`

### <a name="input_application_insights"></a> [application\_insights](#input\_application\_insights)

Description: n/a

Type:

```hcl
object({
    la_workspace_id     = string
    retention_in_days   = optional(number, 90)
    resource_group_name = optional(string)
  })
```

Default: `null`

### <a name="input_client_affinity_enabled"></a> [client\_affinity\_enabled](#input\_client\_affinity\_enabled)

Description: n/a

Type: `bool`

Default: `false`

### <a name="input_http2_enabled"></a> [http2\_enabled](#input\_http2\_enabled)

Description: n/a

Type: `bool`

Default: `true`

### <a name="input_https_only"></a> [https\_only](#input\_https\_only)

Description: n/a

Type: `bool`

Default: `true`

### <a name="input_private_endpoints"></a> [private\_endpoints](#input\_private\_endpoints)

Description: A map of Private Endpoints to create for the Web App.

Map key is an arbitrary identifier. Each object supports:

- `private_dns_zone_resource_id` - Resource ID of the Private DNS Zone to link (e.g. /subscriptions/<subId>/resourceGroups/<rg>/providers/Microsoft.Network/privateDnsZones/privatelink.azurewebsites.net).
- `subnet_resource_id` - Resource ID of the subnet where the Private Endpoint will be created.
- `resource_group_name` - Optional. Target resource group name for the Private Endpoint resource. If omitted, module defaults are used.

Type:

```hcl
map(object({
    private_dns_zone_resource_id = string
    subnet_resource_id           = string
    resource_group_name          = optional(string)
  }))
```

Default: `{}`

### <a name="input_public_network_access_enabled"></a> [public\_network\_access\_enabled](#input\_public\_network\_access\_enabled)

Description: Whether public network access is enabled

Type: `bool`

Default: `false`

### <a name="input_short_description"></a> [short\_description](#input\_short\_description)

Description: Optional short description of the resource

Type: `string`

Default: `null`

### <a name="input_tags"></a> [tags](#input\_tags)

Description: A mapping of tags to assign to the resource

Type: `map(string)`

Default: `{}`

### <a name="input_vnet_route_all_enabled"></a> [vnet\_route\_all\_enabled](#input\_vnet\_route\_all\_enabled)

Description: n/a

Type: `bool`

Default: `true`

### <a name="input_websockets_enabled"></a> [websockets\_enabled](#input\_websockets\_enabled)

Description: n/a

Type: `bool`

Default: `false`

## Outputs

The following outputs are exported:

### <a name="output_identity"></a> [identity](#output\_identity)

Description: n/a

### <a name="output_name"></a> [name](#output\_name)

Description: n/a

### <a name="output_resource_id"></a> [resource\_id](#output\_resource\_id)

Description: n/a

## Modules

The following Modules are called:

### <a name="module_managed_identity"></a> [managed\_identity](#module\_managed\_identity)

Source: ../managed_identity

Version:

### <a name="module_naming_app_insights"></a> [naming\_app\_insights](#module\_naming\_app\_insights)

Source: ../naming

Version:

### <a name="module_naming_app_service"></a> [naming\_app\_service](#module\_naming\_app\_service)

Source: ../naming

Version:

### <a name="module_naming_nic"></a> [naming\_nic](#module\_naming\_nic)

Source: ../naming

Version:

### <a name="module_naming_pe"></a> [naming\_pe](#module\_naming\_pe)

Source: ../naming

Version:

### <a name="module_naming_psc"></a> [naming\_psc](#module\_naming\_psc)

Source: ../naming

Version:

### <a name="module_this"></a> [this](#module\_this)

Source: Azure/avm-res-web-site/azurerm

Version: 0.18.0

<!-- END_TF_DOCS -->